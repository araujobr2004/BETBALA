<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BetBala</title>
    <link rel = "stylesheet" href = "style.css">
</head>
<body>

    <h1>⚽Bem-vindo(a) ao BetBala⚽</h1>
    <h2>Calcule aqui sua aposta!</h2>

    <form id="formAposta" autocomplete="off">
        <div class="form-group">
            <label for="valor_aposta">Valor Total da Aposta (R$):</label>
            <input type="number" id="valor_aposta" name="valor_aposta" placeholder="Ex: 100.00" inputmode="decimal" step="0.01" autofocus>
        </div>
        <div class="form-group">
            <label for="odds1">Odd1:</label>
            <input type="number" id="odds1" name="odds1" placeholder="Ex: 1.25" inputmode="decimal" step="0.01">
        </div>
        <div class="form-group">
            <label for="odds2">Odd2:</label>
            <input type="number" id="odds2" name="odds2" placeholder="Ex: 1.25" inputmode="decimal" step="0.01">
        </div>
        <input type="submit" value="Calcular Retorno">
    </form>


    <div id="resultado"></div>

    <div id="customModal" class="modal">
      <div class="modal-content">
        <span class="close" id="closeModal">&times;</span>
        <div id="modalBody"></div>
      </div>
    </div>

    <div class="info-box">
        <h3>ATENÇÃO!</h3>
        <p>Este informe serve para orientar sobre o uso da ferramenta.</p>
        <h4>Como usar a Calculadora:</h4>
        <ul>
            <li><strong>Valor Total da Aposta (R$):</strong> Informe o valor total que deseja investir na operação. Exemplo: se você vai apostar R$700 na Odd1 e R$300 na Odd2, o valor total será R$1000.</li>
            <li><strong>Odd1:</strong> Informe a odd da casa de aposta 1.</li>
            <li><strong>Odd2:</strong> Informe a odd da casa de aposta 2.</li>
        </ul>
        <h4>Sobre a Análise:</h4>
        <ul>
            <li><strong>Aposta Odd1:</strong> Valor sugerido para apostar na Odd1.</li>
            <li><strong>Aposta Odd2:</strong> Valor sugerido para apostar na Odd2.</li>
            <li><strong>Retorno Garantido:</strong> Valor que você receberá em qualquer cenário de vitória (GREEN).</li>
            <li><strong>Lucro Garantido:</strong> Lucro mínimo garantido na operação (pode ser ainda maior dependendo do resultado).</li>
        </ul>
        <h4>Sobre o BetBala</h4>
        <p>
            O objetivo desta ferramenta é ajudar você a planejar apostas seguras, cruzando duas apostas em que, ao perder uma, o ganho na outra cobre a perda e ainda garante lucro. Basta informar o valor total a investir e as odds das casas de apostas para saber se é possível garantir uma BET segura e quanto apostar em cada odd para garantir o lucro.
        </p>
    </div>

    <script src="main.js"></script>
    <script>
    document.getElementById('formAposta').addEventListener('submit', function(event) {
        event.preventDefault();
        const valor = document.getElementById('valor_aposta').value.replace(',', '.');
        const odds1 = document.getElementById('odds1').value.replace(',', '.');
        const odds2 = document.getElementById('odds2').value.replace(',', '.');

        let mensagem = '';
        if (!valor || isNaN(parseFloat(valor)) || parseFloat(valor) <= 0) {
            mensagem += 'Preencha corretamente o valor da aposta (maior que zero).\n';
        }
        if (!odds1 || isNaN(parseFloat(odds1)) || parseFloat(odds1) <= 0) {
            mensagem += 'Preencha corretamente a Odd1 (maior que zero).\n';
        }
        if (!odds2 || isNaN(parseFloat(odds2)) || parseFloat(odds2) <= 0) {
            mensagem += 'Preencha corretamente a Odd2 (maior que zero).\n';
        }

        if (mensagem) {
            document.getElementById('resultado').textContent = mensagem.trim();
            return;
        }

        const resultado = calcularApostas(
            parseFloat(valor),
            parseFloat(odds1),
            parseFloat(odds2)
        );

        if (resultado.erro) {
            let msg = `<strong>${resultado.erro}</strong>`;
            if (resultado.oddsMinimas) {
                msg += `<br><br>Para garantir lucro com Odd1 = ${parseFloat(odds1)}, a Odd2 precisa ser pelo menos:<br>`;
                msg += resultado.oddsMinimas
                    .map(o => `<span class="odds-sugestao">${o.toFixed(2)}</span>`)
                    .join(" ");
            }
            showModal(msg, "modal-red");
            document.getElementById('resultado').textContent = resultado.erro;
        } else {
            const msg = `
                <strong>Aposta Odd1:</strong> R$ ${resultado.apostaOdd1.toFixed(2)}<br>
                <strong>Aposta Odd2:</strong> R$ ${resultado.apostaOdd2.toFixed(2)}<br>
                <strong>Retorno Garantido:</strong> R$ ${resultado.retornoGarantido.toFixed(2)}<br>
                <strong>Lucro Garantido:</strong> R$ ${resultado.lucroGarantido.toFixed(2)}
            `;
            showModal(msg);
            document.getElementById('resultado').innerHTML =
                `<div>
                    <strong>Aposta Odd1:</strong> R$ ${resultado.apostaOdd1.toFixed(2)}<br>
                    <strong>Aposta Odd2:</strong> R$ ${resultado.apostaOdd2.toFixed(2)}<br>
                    <strong>Retorno Garantido:</strong> R$ ${resultado.retornoGarantido.toFixed(2)}<br>
                    <strong>Lucro Garantido:</strong> R$ ${resultado.lucroGarantido.toFixed(2)}
                </div>`;
        }
    });

    // Função para mostrar o modal
    function showModal(content, extraClass = "") {
        const modal = document.getElementById('customModal');
        const modalContent = modal.querySelector('.modal-content');
        document.getElementById('modalBody').innerHTML = content;
        modal.style.display = 'block';
        // Remove qualquer classe extra anterior
        modalContent.classList.remove('modal-red');
        if (extraClass) {
            modalContent.classList.add(extraClass);
        }
    }

    // Fechar modal ao clicar no X
    document.getElementById('closeModal').onclick = function() {
        document.getElementById('customModal').style.display = 'none';
    };

    // Fechar modal ao clicar fora do conteúdo
    window.onclick = function(event) {
        if (event.target == document.getElementById('customModal')) {
            document.getElementById('customModal').style.display = 'none';
        }
    };
    </script>

</body>
</html>